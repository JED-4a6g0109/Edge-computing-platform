{% load static %}
<!doctype html>
<html lang="en">
  <head>

    <link rel="stylesheet" href={% static 'css/index.css' %}>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css" rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js">
    </script>
  </head>

  <body>
    <div class="container">
  <div class="row">
    {% csrf_token %}

  <p></p>
  <h1>Model管理平台</h1>
  <p> </p><p> </p>

      <div class="col-md-10 col-md-offset-1">

          <div class="panel panel-default panel-table">
            <div class="panel-heading">
              <div class="row">
                <div class="col col-xs-6">
                  <h3 class="panel-title">所有檔案清單</h3>
                </div>
                <div class="col col-xs-6 text-right">
                  <button type="button" class="btn btn-sm btn-primary btn-create" 
                  onclick="window.location.href='{% url 'file_upload:upload' %}';"
                  >檔案上傳</button>
                </div>
              </div>
            </div>
            <div class="panel-body">
              <table class="table table-striped table-bordered table-list">
                <thead>
                  <tr>
                      <th><em class="fa fa-cog"></em></th>
                      <th class="hidden-xs">群組</th>
                      <th>版本</th>
                      <th>說明</th>
                      <th>上傳時間</th>
                      <th>下載</th>
                      <th>補丁</th>
                      <th>壓縮檔</th>
                  </tr> 
                </thead>
                <tbody>

                  {% for group,value in JSON_data.items %}

                        <tr>
                          
                          <td >

                            <table>
                              <tr>
                                <div>setting<div>
                                {% for i in value%}
                                
                                <td id="demo-{{ value.0.title }}" class="collapse multi-collapse">
                                  <a  href="{% url 'file_upload:file_edit' i.pk %}"><span class="glyphicon glyphicon-pencil"></span></a>
                                  <a  href="{% url 'file_upload:file_delete_model' i.pk %}"><span class="glyphicon glyphicon-trash"></a>
                                </td>

                                  {% endfor %} 

                              </tr>
                            </table>

                          </td>
                          
                          <!-- <button type="button" class="fa fa-chevron-right rotate" data-toggle="collapse"
                            data-target="#demo-{{ r.pk }}"> -->
                            
                          <td class="hidden-xs" type="button" class="fa fa-chevron-right rotate" data-toggle="collapse"
                          data-target=".multi-collapse" aria-expanded="false" aria-controls="demo-{{ value.0.title }} demo-{{ value.0.title }}" >{{ value.0.title }}</td>
                          
                          <td>{{value.0.version}}
                            <table>
                              <tr>
                                {% for i in value%}

                                <td id="demo-{{ value.0.title }}" class="collapse multi-collapse">
                                  <div class="col-2">{{i.version}}</div>

                                  {% endfor %} 

                              </tr>
                            </table>
                          </td>

                          </td>





                          <td>{{ value.0.description }}
                            <table>
                              <tr>
                                {% for i in value%}

                                <td id="demo-{{ value.0.title }}" class="collapse multi-collapse">
                                  <div class="col-2">{{i.description}}</div>

                                  {% endfor %} 

                              </tr>
                            </table>

                          </td>

                          <td>{{ value.0.uploaded_at }}
                            <table>
                              <tr>
                                {% for i in value%}

                                <td id="demo-{{ value.0.title }}" class="collapse multi-collapse">
                                  <div class="col-2">{{i.uploaded_at}}</div>

                                  {% endfor %} 

                              </tr>
                            </table>


                          </td>

                    
                          <td><div>Model</div>
                            <table>
                              <tr>
                                <td id="demo-{{ value.0.title }}" class="collapse multi-collapse">
                                  {% for i in value%}

                                  <div><a href="http://127.0.0.1:8000/media/D%3A/Edge-computing-platform/media/Files/{{i.title}}/{{i.title}}-{{i.version}}.h5" download>{{i.version}}</a>

                                  {% endfor %} 
                                 </td>
                              </tr>
                            </table>

                            
                          </td>

                          <td><div>Patch</div>
                            <table>
                              <tr>
                                <td id="demo-{{ value.0.title }}" class="collapse multi-collapse">
                                  {% for i in value%}
                                    {% if i.version != "1.0.0" %}
                                      <div><a href="http://127.0.0.1:8000/media/D%3A/Edge-computing-platform/media/Files/{{i.title}}/{{i.title}}-{{i.version}}.patch" download>{{i.version}}</a>
                                    {% else %}
                                      <div>Not Patch</a>
                                    {% endif %}


                                  {% endfor %} 
                                 </td>
                              </tr>
                            </table>

                            
                          </td>

                          <td><div>Zip</div>
                            <table>
                              <tr>
                                <td id="demo-{{ value.0.title }}" class="collapse multi-collapse">
                                  {% for i in value%}
                                    {% if i.version != "1.0.0" %}
                                      <div><a href="http://127.0.0.1:8000/media/D%3A/Edge-computing-platform/media/Files/{{i.title}}/{{i.title}}-{{i.version}}.zip" download>{{i.version}}.zip</a>
                                    {% else %}
                                      <div>Not Zip</a>
                                    {% endif %}


                                  {% endfor %} 
                                 </td>
                              </tr>
                            </table>

                            
                          </td>

                        </tr>
                        {% endfor %} 
                      </tbody>
              </table>
          
            </div>
            <div class="panel-footer">
              <div class="row">
                <div class="col col-xs-4">Page 1 of 5
                </div>
                <div class="col col-xs-8">
                  <ul class="pagination hidden-xs pull-right">
                    <li><a href="#">1</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">4</a></li>
                    <li><a href="#">5</a></li>
                  </ul>
                  <ul class="pagination visible-xs pull-right">
                      <li><a href="#">«</a></li>
                      <li><a href="#">»</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

</div></div></div>

  </body>
